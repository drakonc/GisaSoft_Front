
<aside class="w-64 h-full bg-white border-r border-gray-100 flex flex-col p-4">
  <div class="flex items-center gap-2 px-4 py-4">
    <svg class="h-10 w-10 text-blue-600" viewBox="0 0 100 100" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
      <path fill-rule="evenodd" clip-rule="evenodd" d="M50 0L0 100H100L50 0ZM50 25L25 75H75L50 25Z" />
    </svg>
    <div class="flex flex-col">
        <span class="text-xl font-bold text-gray-800">GIS</span>
        <span class="text-xs text-gray-500">Gestion Integral de Salud</span>
    </div>
  </div>
  
  <nav class="mt-8 flex-1">
    <h3 class="px-4 text-xs font-semibold text-gray-400 uppercase tracking-wider">Menu</h3>
    <ul class="mt-4 space-y-2">
      @for (item of menuItems(); track item.name) {
        <li>
          <a href="#" (click)="$event.preventDefault(); selectMenuItem(item)" class="flex items-center justify-between px-4 py-2.5 rounded-lg transition-colors duration-200" [class]="item.active ? 'bg-blue-100/60 text-blue-600 font-semibold' : 'text-gray-500 hover:bg-blue-50 hover:text-blue-600'">
            <div class="flex items-center">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5" [class]="item.active ? 'text-blue-500' : 'text-gray-400'">
                <g [innerHTML]="item.icon | safeHtml"></g>
              </svg>
              <span class="ml-4 text-sm font-medium">{{ item.name }}</span>
            </div>
             @if(item.badge) {
              <span class="ml-auto text-xs font-semibold text-white bg-blue-500 rounded-full px-2 py-0.5">{{ item.badge }}</span>
            }
            @if(item.subItems && item.subItems.length > 0) {
              <svg class="w-4 h-4 transition-transform duration-200" [class]="item.expanded ? 'rotate-90' : ''" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" d="m8.25 4.5 7.5 7.5-7.5 7.5" />
              </svg>
            }
          </a>
          @if (item.subItems && item.expanded) {
            <ul class="mt-2 space-y-2 pl-8">
              @for(subItem of item.subItems; track subItem.name) {
                <li>
                  <a href="#" (click)="$event.preventDefault(); selectSubMenuItem(item, subItem)" class="flex items-center py-2 px-3 text-sm rounded-md transition-colors" [class]="subItem.active ? 'text-blue-600 font-semibold' : 'text-gray-500 hover:text-blue-600 hover:bg-blue-50'">
                     <span class="w-1.5 h-1.5 mr-3 rounded-full" [class]="subItem.active ? 'bg-blue-500' : 'bg-gray-300'"></span>
                     {{ subItem.name }}
                  </a>
                </li>
              }
            </ul>
          }
        </li>
      }
    </ul>

    <h3 class="px-4 mt-10 text-xs font-semibold text-gray-400 uppercase tracking-wider">Cuenta</h3>
    <ul class="mt-4 space-y-2">
       @for (item of accountItems(); track item.name) {
        <li>
          <a href="#" (click)="$event.preventDefault(); selectAccountItem(item)" class="flex items-center px-4 py-2.5 rounded-lg transition-colors duration-200" [class]="item.active ? 'bg-blue-100/60 text-blue-600 font-semibold' : 'text-gray-500 hover:bg-blue-50 hover:text-blue-600'">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5" [class]="item.active ? 'text-blue-500' : 'text-gray-400'">
              <g [innerHTML]="item.icon | safeHtml"></g>
            </svg>
            <span class="ml-4 text-sm font-medium">{{ item.name }}</span>
          </a>
        </li>
      }
    </ul>
  </nav>
</aside>
